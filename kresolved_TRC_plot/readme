This is instructions on how to get the k-resolved transmission for a hexagonal unit cell. The scripts are not the final versions yet so there will be problems with them so let me know when they inevitably fail at haldera@tcd.ie or nelld@tcd.ie.

First, one should create a new directory and copy the input.fdf, Density matrix, psuedopotentials and leads files into it. One then needs to generate the k-grid which will be read as input for a non self consistent calculation. This is generated by the script get_bz.py. We use it by typing in the terminal

python3 get_bz.py  input.fdf  system_label.KPIN  num_kx num_ky

where num_kx and num_ky are the number of k points in the x and y direction for which you want to the non-self consistent calculation. 
This will generate the k-mesh and points of the brillioun zone boundaries which can be found in the file brillioun_zone.dat.

Then you should modify the input.fdf file by adding 
READKPIN T
TransmissionOverK                T
TRC.EMPDOSK         T
TRC.EMPDOS                       T
TRC.LeadsDOS                     F

removing the block 
%block kgrid_Monkhorst_Pack
  20  0   0     0.0
  0   20   0     0.0
  0   0   1     0.0
%endblock kgrid_Monkhorst_Pack
 and changing 
 MaxSCFIterations         1
 and 
 TrCoefficients               T
 NTransmPoints             1
InitTransmRange          -0.00001d0 eV
FinalTransmRange          0.00001d0 eV



 Then one should submit this calculation. The k-resolved trc can be found in the file system_label.TRC.k.up and system_label.TRC.k.down
 Once it is complete, you can print the k-resolved trc by using the script kresolved_TRC_plot.py.  Within kresolved_TRC_plot.py, one needs to change the lines 
 points = [
    [-0.5654611662864423, 0.0],
    [-0.28273058316383376, -0.48970373484573504],
    [0.28273058316383376, -0.48970373484573504],
    [0.5654611662864423, 0.0],
    [0.28273058316383376, 0.48970373484573504],
    [-0.28273058316383376, 0.48970373484573504],
    [-0.5654611662864423, -0.0],
]

to the correct Brillioun zone points which can be found in brillioun_zone.dat.



